<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sealrez® 7700C — Stock</title>
  <style>
    :root{
      --green:#009B75;         /* PMS Simply Green */
      --black:#2D2C2F;         /* PMS Jet Black */
      --bg:#141316;
      --panel:#1c1b20;
      --panel2:#23222a;
      --text:#f2f2f3;
      --muted:#b9b9c0;
      --line:rgba(255,255,255,.10);
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --orange:#F59E0B;
      --good: #22c55e;
      --focus: rgba(0,155,117,.35);
      --radius: 16px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Helvetica Neue", sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 800px at 20% -10%, rgba(0,155,117,.25), transparent 55%),
                  radial-gradient(900px 700px at 100% 0%, rgba(245,158,11,.12), transparent 55%),
                  linear-gradient(180deg, var(--bg), #0f0f12 70%);
      overflow-x:hidden;
    }

    /* Falling O-rings canvas */
    #ringsCanvas{
      position:fixed;
      inset:0;
      z-index:0;
      pointer-events:none;
      opacity:.55;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.35));
    }

    .page{
      position:relative;
      z-index:1;
      max-width:1200px;
      margin:0 auto;
      padding:28px 18px 60px;
    }

    header{
      display:flex;
      gap:14px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
      margin-bottom:18px;
    }

    .brand{
      display:flex;
      flex-direction:column;
      gap:6px;
      min-width:280px;
    }
    .kicker{
      display:inline-flex;
      gap:10px;
      align-items:center;
      color:var(--muted);
      font-size:13px;
      letter-spacing:.2px;
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background:var(--green);
      box-shadow:0 0 0 5px rgba(0,155,117,.18);
    }
    h1{
      margin:0;
      font-size:28px;
      letter-spacing:.2px;
      line-height:1.1;
    }
    .sub{
      margin:0;
      color:var(--muted);
      max-width:68ch;
      line-height:1.45;
      font-size:14px;
    }

    .legend{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      background:rgba(45,44,47,.55);
      border:1px solid var(--line);
      padding:10px 12px;
      border-radius:999px;
      backdrop-filter: blur(10px);
    }
    .pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.18);
      font-size:12.5px;
      color:var(--muted);
      white-space:nowrap;
    }
    .swatch{
      width:10px;height:10px;border-radius:50%;
    }
    .swatch.green{background:var(--green)}
    .swatch.orange{background:var(--orange)}
    .swatch.black{background:var(--black)}

    .toolbar{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      margin:14px 0 14px;
    }
    .controls{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .field{
      display:flex;
      align-items:center;
      gap:10px;
      background:rgba(35,34,42,.78);
      border:1px solid var(--line);
      padding:10px 12px;
      border-radius:12px;
      box-shadow: 0 1px 0 rgba(255,255,255,.04) inset;
      backdrop-filter: blur(10px);
      min-height:42px;
    }
    .field input, .field select, .field textarea{
      background:transparent;
      border:0;
      outline:none;
      color:var(--text);
      font-size:14px;
      width:260px;
    }
    .field select{width:180px}
    .field textarea{width:100%; resize:vertical; min-height:88px}
    .field input::placeholder, .field textarea::placeholder{color:rgba(185,185,192,.65)}
    .field:focus-within{
      border-color: rgba(0,155,117,.55);
      box-shadow: 0 0 0 4px var(--focus);
    }

    .stats{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      color:var(--muted);
      font-size:13px;
    }
    .stat{
      padding:8px 10px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.18);
      border-radius:999px;
    }

    .card{
      background:rgba(28,27,32,.75);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      overflow:hidden;
    }

    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0;
      font-size:14px;
    }
    thead th{
      position:sticky;
      top:0;
      z-index:2;
      background:linear-gradient(180deg, rgba(35,34,42,.92), rgba(35,34,42,.78));
      border-bottom:1px solid var(--line);
      color:rgba(242,242,243,.92);
      text-align:left;
      padding:12px 12px;
      font-weight:600;
      letter-spacing:.2px;
    }
    thead th.sortable{
      cursor:pointer;
      user-select:none;
    }
    thead th.sortable:hover{
      background:linear-gradient(180deg, rgba(0,155,117,.18), rgba(35,34,42,.78));
    }
    tbody td{
      padding:12px 12px;
      border-bottom:1px solid rgba(255,255,255,.06);
      vertical-align:middle;
      color:rgba(242,242,243,.92);
    }
    tbody tr{
      transition: transform .06s ease, background .12s ease, border-color .12s ease;
      cursor:pointer;
    }
    tbody tr:hover{
      background:rgba(255,255,255,.04);
      transform: translateY(-1px);
    }

    .code{
      font-variant-numeric: tabular-nums;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:13px;
      color:rgba(242,242,243,.86);
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      font-size:12.5px;
      font-weight:600;
      letter-spacing:.15px;
    }
    .badge.instock{
      background:rgba(0,155,117,.15);
      border-color: rgba(0,155,117,.45);
      color:#bff4e7;
    }
    .badge.onrequest{
      background:rgba(245,158,11,.14);
      border-color: rgba(245,158,11,.45);
      color:#ffe3b0;
    }
    .row-instock{
      box-shadow: inset 4px 0 0 rgba(0,155,117,.85);
    }
    .row-onrequest{
      box-shadow: inset 4px 0 0 rgba(245,158,11,.85);
    }

    .actions{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:flex-end;
    }
    .btn{
      appearance:none;
      border:1px solid var(--line);
      background:rgba(0,0,0,.20);
      color:var(--text);
      border-radius:12px;
      padding:10px 12px;
      font-weight:700;
      letter-spacing:.2px;
      cursor:pointer;
      transition: transform .06s ease, background .12s ease, border-color .12s ease;
    }
    .btn:hover{background:rgba(255,255,255,.06)}
    .btn:active{transform: translateY(1px)}
    .btn.primary{
      border-color: rgba(0,155,117,.55);
      background: linear-gradient(180deg, rgba(0,155,117,.30), rgba(0,155,117,.16));
    }
    .btn.primary:hover{
      background: linear-gradient(180deg, rgba(0,155,117,.36), rgba(0,155,117,.18));
    }

    footer{
      margin-top:14px;
      color:rgba(185,185,192,.85);
      font-size:12.5px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
    }

    /* Modal */
    .modalOverlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.55);
      z-index:50;
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
    }
    .modal{
      width:min(760px, 100%);
      border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.12);
      background:linear-gradient(180deg, rgba(35,34,42,.95), rgba(28,27,32,.92));
      box-shadow: 0 30px 120px rgba(0,0,0,.65);
      backdrop-filter: blur(14px);
    }
    .modalHeader{
      padding:14px 16px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    .modalTitle{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .modalTitle h2{
      margin:0;
      font-size:18px;
      letter-spacing:.2px;
      line-height:1.2;
    }
    .modalTitle p{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.4;
    }
    .modalBody{
      padding:14px 16px 16px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    .modalBody .field{width:100%}
    .modalBody .field input, .modalBody .field select{width:100%}
    .span2{grid-column: 1 / -1;}
    .closeBtn{
      border-radius:12px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(0,0,0,.18);
      color:var(--text);
      cursor:pointer;
      padding:10px 12px;
      font-weight:800;
    }
    .closeBtn:hover{background:rgba(255,255,255,.06)}

    @media (max-width: 820px){
      .modalBody{grid-template-columns: 1fr}
      .field input{width:220px}
      .actions{justify-content:flex-start}
    }
  </style>
</head>
<body>
<canvas id="ringsCanvas"></canvas>

<div class="page">
  <header>
    <div class="brand">
      <div class="kicker"><span class="dot"></span> Sealrez® inventory management</div>
      <h1>O-ring compound <span style="color:var(--green)">Sealrez® 7700C</span> — Stock</h1>
      <p class="sub">
        Click a size to create a request instantly. <strong>In stock</strong> is green, <strong>On request</strong> is orange.
      </p>
    </div>

    <div class="legend" aria-label="Legend">
      <span class="pill"><span class="swatch green"></span> In stock</span>
      <span class="pill"><span class="swatch orange"></span> On request</span>
      <span class="pill"><span class="swatch black"></span> Theme: Jet Black</span>
    </div>
  </header>

  <div class="toolbar">
    <div class="controls">
      <div class="field" title="Search by AS code, dimension, or status">
        <span style="color:var(--muted);font-weight:700;">Search</span>
        <input id="search" type="text" placeholder="e.g. AS018, 18,77 x 1,78, On request…" />
      </div>

      <div class="field" title="Filter by status">
        <span style="color:var(--muted);font-weight:700;">Status</span>
        <select id="statusFilter">
          <option value="all">All</option>
          <option value="in">In stock</option>
          <option value="req">On request</option>
        </select>
      </div>

      <button class="btn primary" id="openGeneralForm" type="button">General request</button>
    </div>

    <div class="stats" id="stats"></div>
  </div>

  <div class="card" role="region" aria-label="Stock table">
    <table>
      <thead>
        <tr>
          <th class="sortable" data-sort="code">Code</th>
          <th class="sortable" data-sort="size">ID × CS (mm)</th>
          <th class="sortable" data-sort="status">Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
  </div>

  <footer>
    <div>Tip: sort by clicking a column header (Code / ID×CS / Status).</div>
    <div>Contact: <strong>info@sealrez.eu</strong></div>
  </footer>
</div>

<!-- Modal -->
<div class="modalOverlay" id="modalOverlay" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal" role="document">
    <div class="modalHeader">
      <div class="modalTitle">
        <h2 id="modalHeading">Request — Sealrez® 7700C</h2>
        <p id="modalSub">Enter your details; submitting will open your email client with a prefilled request to info@sealrez.eu.</p>
      </div>
      <button class="closeBtn" id="closeModal" type="button" aria-label="Close">✕</button>
    </div>

    <form id="requestForm">
      <div class="modalBody">
        <div class="field">
          <span style="color:var(--muted);font-weight:700;">Name</span>
          <input id="fName" name="name" type="text" placeholder="Full name" required />
        </div>
        <div class="field">
          <span style="color:var(--muted);font-weight:700;">Company</span>
          <input id="fCompany" name="company" type="text" placeholder="Company name" />
        </div>

        <div class="field">
          <span style="color:var(--muted);font-weight:700;">Email</span>
          <input id="fEmail" name="email" type="email" placeholder="name@company.com" required />
        </div>
        <div class="field">
          <span style="color:var(--muted);font-weight:700;">Phone</span>
          <input id="fPhone" name="phone" type="tel" placeholder="+31 …" />
        </div>

        <div class="field">
          <span style="color:var(--muted);font-weight:700;">Code</span>
          <input id="fCode" name="code" type="text" placeholder="ASxxx" />
        </div>
        <div class="field">
          <span style="color:var(--muted);font-weight:700;">ID × CS (mm)</span>
          <input id="fSize" name="size" type="text" placeholder="e.g. 18,77 x 1,78" />
        </div>

        <div class="field">
          <span style="color:var(--muted);font-weight:700;">Requested quantities</span>
          <input id="fQty" name="qty" type="text" placeholder="e.g. 100 pcs" />
        </div>
        <div class="field">
          <span style="color:var(--muted);font-weight:700;">Status</span>
          <input id="fStatus" name="status" type="text" placeholder="In stock / On request" />
        </div>

        <div class="field span2">
          <span style="color:var(--muted);font-weight:700;">Message</span>
          <textarea id="fMessage" name="message" placeholder="Extra info (delivery date, application, drawing ref., etc.)"></textarea>
        </div>

        <div class="span2 actions">
          <button class="btn" id="copyDetails" type="button" title="Copy request text to clipboard">Copy text</button>
          <button class="btn primary" type="submit">Send request</button>
        </div>
      </div>
    </form>
  </div>
</div>

<script>
/** =========================
 *  DATA — Sealrez® 7700C
 *  ========================= */
const PRODUCT_NAME = "O-ring compound Sealrez® 7700C";
const EMAIL_TO = "info@sealrez.eu";

// Helper: normalize AS codes like "AS 310" -> "AS310"
const normCode = (s) => (s || "").replace(/\s+/g,"").toUpperCase();

const DATA = [
  { code:"AS001", size:"0,74 x 1,02", status:"On request" },
  { code:"AS002", size:"1,07 x 1,27", status:"On request" },
  { code:"AS003", size:"1,42 x 1,52", status:"On request" },
  { code:"AS004", size:"1,78 x 1,78", status:"In stock" },
  { code:"AS005", size:"2,57 x 1,78", status:"In stock" },
  { code:"AS006", size:"2,9 x 1,78", status:"In stock" },
  { code:"AS007", size:"3,68 x 1,78", status:"In stock" },
  { code:"AS008", size:"4,47 x 1,78", status:"In stock" },
  { code:"AS009", size:"5,28 x 1,78", status:"In stock" },
  { code:"AS010", size:"6,07 x 1,78", status:"In stock" },
  { code:"AS011", size:"7,65 x 1,78", status:"In stock" },
  { code:"AS012", size:"9,25 x 1,78", status:"In stock" },
  { code:"AS013", size:"10,82 x 1,78", status:"In stock" },
  { code:"AS014", size:"12,42 x 1,78", status:"In stock" },
  { code:"AS015", size:"14 x 1,78", status:"In stock" },
  { code:"AS016", size:"15,6 x 1,78", status:"In stock" },
  { code:"AS017", size:"17,17 x 1,78", status:"In stock" },
  { code:"AS018", size:"18,77 x 1,78", status:"In stock" },
  { code:"AS019", size:"20,35 x 1,78", status:"In stock" },
  { code:"AS020", size:"21,95 x 1,78", status:"In stock" },
  { code:"AS021", size:"23,52 x 1,78", status:"In stock" },
  { code:"AS022", size:"25,12 x 1,78", status:"In stock" },
  { code:"AS023", size:"26,7 x 1,78", status:"In stock" },
  { code:"AS024", size:"28,3 x 1,78", status:"In stock" },
  { code:"AS025", size:"29,87 x 1,78", status:"In stock" },
  { code:"AS026", size:"31,47 x 1,78", status:"In stock" },
  { code:"AS027", size:"33,05 x 1,78", status:"In stock" },
  { code:"AS028", size:"34,65 x 1,78", status:"In stock" },
  { code:"AS029", size:"37,82 x 1,78", status:"In stock" },
  { code:"AS030", size:"41 x 1,78", status:"In stock" },
  { code:"AS031", size:"44,17 x 1,78", status:"In stock" },
  { code:"AS032", size:"47,35 x 1,78", status:"In stock" },
  { code:"AS033", size:"50,52 x 1,78", status:"In stock" },
  { code:"AS034", size:"53,7 x 1,78", status:"In stock" },
  { code:"AS035", size:"56,87 x 1,78", status:"On request" },
  { code:"AS036", size:"60,05 x 1,78", status:"On request" },
  { code:"AS037", size:"63,22 x 1,78", status:"On request" },
  { code:"AS038", size:"66,4 x 1,78", status:"On request" },
  { code:"AS039", size:"69,57 x 1,78", status:"On request" },
  { code:"AS040", size:"72,75 x 1,78", status:"On request" },
  { code:"AS041", size:"75,92 x 1,78", status:"On request" },
  { code:"AS042", size:"82,27 x 1,78", status:"On request" },
  { code:"AS043", size:"88,62 x 1,78", status:"On request" },
  { code:"AS044", size:"94,97 x 1,78", status:"On request" },
  { code:"AS045", size:"101,32 x 1,78", status:"On request" },
  { code:"AS046", size:"107,67 x 1,78", status:"On request" },
  { code:"AS047", size:"114,02 x 1,78", status:"On request" },
  { code:"AS048", size:"120,37 x 1,78", status:"On request" },
  { code:"AS049", size:"126,72 x 1,78", status:"On request" },
  { code:"AS050", size:"133,07 x 1,78", status:"On request" },

  { code:"AS102", size:"1,24 x 2,62", status:"On request" },
  { code:"AS103", size:"2,06 x 2,62", status:"On request" },
  { code:"AS104", size:"2,84 x 2,62", status:"On request" },
  { code:"AS105", size:"3,63 x 2,62", status:"On request" },
  { code:"AS106", size:"4,42 x 2,62", status:"In stock" },
  { code:"AS107", size:"5,23 x 2,62", status:"In stock" },
  { code:"AS108", size:"6,02 x 2,62", status:"In stock" },
  { code:"AS109", size:"7,59 x 2,62", status:"In stock" },
  { code:"AS110", size:"9,19 x 2,62", status:"In stock" },
  { code:"AS111", size:"10,77 x 2,62", status:"In stock" },
  { code:"AS112", size:"12,37 x 2,62", status:"In stock" },
  { code:"AS113", size:"13,94 x 2,62", status:"In stock" },
  { code:"AS114", size:"15,54 x 2,62", status:"In stock" },
  { code:"AS115", size:"17,12 x 2,62", status:"In stock" },
  { code:"AS116", size:"18,72 x 2,62", status:"In stock" },
  { code:"AS117", size:"20,29 x 2,62", status:"In stock" },
  { code:"AS118", size:"21,89 x 2,62", status:"In stock" },
  { code:"AS119", size:"23,47 x 2,62", status:"In stock" },
  { code:"AS120", size:"25,07 x 2,62", status:"In stock" },
  { code:"AS121", size:"26,64 x 2,62", status:"In stock" },
  { code:"AS122", size:"28,24 x 2,62", status:"In stock" },
  { code:"AS123", size:"29,82 x 2,62", status:"In stock" },
  { code:"AS124", size:"31,42 x 2,62", status:"In stock" },
  { code:"AS125", size:"32,99 x 2,62", status:"In stock" },
  { code:"AS126", size:"34,59 x 2,62", status:"In stock" },
  { code:"AS127", size:"36,17 x 2,62", status:"In stock" },
  { code:"AS128", size:"37,77 x 2,62", status:"In stock" },
  { code:"AS129", size:"39,34 x 2,62", status:"In stock" },
  { code:"AS130", size:"40,94 x 2,62", status:"In stock" },
  { code:"AS131", size:"42,52 x 2,62", status:"In stock" },
  { code:"AS132", size:"44,12 x 2,62", status:"In stock" },
  { code:"AS133", size:"45,69 x 2,62", status:"In stock" },
  { code:"AS134", size:"47,29 x 2,62", status:"In stock" },
  { code:"AS135", size:"48,9 x 2,62", status:"In stock" },
  { code:"AS136", size:"50,47 x 2,62", status:"In stock" },
  { code:"AS137", size:"52,07 x 2,62", status:"In stock" },
  { code:"AS138", size:"53,64 x 2,62", status:"In stock" },
  { code:"AS139", size:"55,25 x 2,62", status:"In stock" },
  { code:"AS140", size:"56,82 x 2,62", status:"In stock" },
  { code:"AS141", size:"58,42 x 2,62", status:"In stock" },
  { code:"AS142", size:"59,99 x 2,62", status:"In stock" },
  { code:"AS143", size:"61,6 x 2,62", status:"In stock" },
  { code:"AS144", size:"63,17 x 2,62", status:"In stock" },
  { code:"AS145", size:"64,77 x 2,62", status:"In stock" },
  { code:"AS146", size:"66,34 x 2,62", status:"In stock" },
  { code:"AS147", size:"67,95 x 2,62", status:"In stock" },
  { code:"AS148", size:"69,52 x 2,62", status:"In stock" },
  { code:"AS149", size:"71,12 x 2,62", status:"In stock" },
  { code:"AS150", size:"72,69 x 2,62", status:"In stock" },
  { code:"AS151", size:"75,87 x 2,62", status:"In stock" },
  { code:"AS152", size:"82,22 x 2,62", status:"In stock" },
  { code:"AS153", size:"88,57 x 2,62", status:"In stock" },
  { code:"AS154", size:"94,92 x 2,62", status:"In stock" },
  { code:"AS155", size:"101,27 x 2,62", status:"On request" },
  { code:"AS156", size:"107,62 x 2,62", status:"On request" },
  { code:"AS157", size:"113,97 x 2,62", status:"On request" },
  { code:"AS158", size:"120,32 x 2,62", status:"On request" },
  { code:"AS159", size:"126,67 x 2,62", status:"On request" },
  { code:"AS160", size:"133,02 x 2,62", status:"On request" },
  { code:"AS161", size:"139,37 x 2,62", status:"On request" },
  { code:"AS162", size:"145,72 x 2,62", status:"On request" },
  { code:"AS163", size:"152,07 x 2,62", status:"On request" },
  { code:"AS164", size:"158,42 x 2,62", status:"On request" },
  { code:"AS165", size:"164,77 x 2,62", status:"On request" },
  { code:"AS166", size:"171,12 x 2,62", status:"On request" },
  { code:"AS167", size:"177,47 x 2,62", status:"On request" },
  { code:"AS168", size:"183,82 x 2,62", status:"On request" },
  { code:"AS169", size:"190,17 x 2,62", status:"On request" },
  { code:"AS170", size:"196,52 x 2,62", status:"On request" },
  { code:"AS171", size:"202,87 x 2,62", status:"On request" },
  { code:"AS172", size:"209,22 x 2,62", status:"On request" },
  { code:"AS173", size:"215,57 x 2,62", status:"On request" },
  { code:"AS174", size:"221,92 x 2,62", status:"On request" },
  { code:"AS175", size:"228,27 x 2,62", status:"On request" },
  { code:"AS176", size:"234,62 x 2,62", status:"On request" },
  { code:"AS177", size:"240,97 x 2,62", status:"On request" },
  { code:"AS178", size:"247,32 x 2,62", status:"On request" },

  { code:"AS201", size:"4,34 x 3,53", status:"On request" },
  { code:"AS202", size:"5,94 x 3,53", status:"On request" },
  { code:"AS203", size:"7,52 x 3,53", status:"On request" },
  { code:"AS204", size:"9,12 x 3,53", status:"On request" },
  { code:"AS205", size:"10,69 x 3,53", status:"On request" },
  { code:"AS206", size:"12,29 x 3,53", status:"On request" },
  { code:"AS207", size:"13,87 x 3,53", status:"On request" },
  { code:"AS208", size:"15,47 x 3,53", status:"On request" },
  { code:"AS209", size:"17,04 x 3,53", status:"On request" },
  { code:"AS210", size:"18,64 x 3,53", status:"In stock" },
  { code:"AS211", size:"20,22 x 3,53", status:"In stock" },
  { code:"AS212", size:"21,82 x 3,53", status:"In stock" },
  { code:"AS213", size:"23,39 x 3,53", status:"In stock" },
  { code:"AS214", size:"24,99 x 3,53", status:"In stock" },
  { code:"AS215", size:"26,57 x 3,53", status:"In stock" },
  { code:"AS216", size:"28,17 x 3,53", status:"In stock" },
  { code:"AS217", size:"29,74 x 3,53", status:"In stock" },
  { code:"AS218", size:"31,34 x 3,53", status:"In stock" },
  { code:"AS219", size:"32,92 x 3,53", status:"In stock" },
  { code:"AS220", size:"34,52 x 3,53", status:"In stock" },
  { code:"AS221", size:"36,09 x 3,53", status:"In stock" },
  { code:"AS222", size:"37,69 x 3,53", status:"In stock" },
  { code:"AS223", size:"40,87 x 3,53", status:"In stock" },
  { code:"AS224", size:"44,04 x 3,53", status:"In stock" },
  { code:"AS225", size:"47,22 x 3,53", status:"In stock" },
  { code:"AS226", size:"50,39 x 3,53", status:"In stock" },
  { code:"AS227", size:"53,57 x 3,53", status:"In stock" },
  { code:"AS228", size:"56,74 x 3,53", status:"In stock" },
  { code:"AS229", size:"59,92 x 3,53", status:"In stock" },
  { code:"AS230", size:"63,09 x 3,53", status:"In stock" },
  { code:"AS231", size:"66,27 x 3,53", status:"In stock" },
  { code:"AS232", size:"69,44 x 3,53", status:"In stock" },
  { code:"AS233", size:"72,62 x 3,53", status:"In stock" },
  { code:"AS234", size:"75,79 x 3,53", status:"In stock" },
  { code:"AS235", size:"78,97 x 3,53", status:"In stock" },
  { code:"AS236", size:"82,14 x 3,53", status:"In stock" },
  { code:"AS237", size:"85,32 x 3,53", status:"In stock" },
  { code:"AS238", size:"88,49 x 3,53", status:"In stock" },
  { code:"AS239", size:"91,67 x 3,53", status:"In stock" },
  { code:"AS240", size:"94,84 x 3,53", status:"In stock" },
  { code:"AS241", size:"98,02 x 3,53", status:"In stock" },
  { code:"AS242", size:"101,19 x 3,53", status:"In stock" },
  { code:"AS243", size:"104,37 x 3,53", status:"In stock" },
  { code:"AS244", size:"107,54 x 3,53", status:"In stock" },
  { code:"AS245", size:"110,72 x 3,53", status:"In stock" },
  { code:"AS246", size:"113,89 x 3,53", status:"In stock" },
  { code:"AS247", size:"117,07 x 3,53", status:"In stock" },
  { code:"AS248", size:"120,24 x 3,53", status:"In stock" },
  { code:"AS249", size:"123,42 x 3,53", status:"In stock" },
  { code:"AS250", size:"126,59 x 3,53", status:"In stock" },
  { code:"AS251", size:"129,77 x 3,53", status:"In stock" },
  { code:"AS252", size:"132,94 x 3,53", status:"In stock" },
  { code:"AS253", size:"136,12 x 3,53", status:"In stock" },
  { code:"AS254", size:"139,29 x 3,53", status:"On request" },
  { code:"AS255", size:"142,47 x 3,53", status:"On request" },
  { code:"AS256", size:"145,64 x 3,53", status:"On request" },
  { code:"AS257", size:"148,82 x 3,53", status:"On request" },
  { code:"AS258", size:"151,99 x 3,53", status:"On request" },
  { code:"AS259", size:"158,34 x 3,53", status:"On request" },
  { code:"AS260", size:"164,69 x 3,53", status:"On request" },
  { code:"AS261", size:"171,04 x 3,53", status:"On request" },
  { code:"AS262", size:"177,39 x 3,53", status:"On request" },
  { code:"AS263", size:"183,74 x 3,53", status:"On request" },
  { code:"AS264", size:"190,09 x 3,53", status:"On request" },
  { code:"AS265", size:"196,44 x 3,53", status:"On request" },
  { code:"AS266", size:"202,79 x 3,53", status:"On request" },
  { code:"AS267", size:"209,14 x 3,53", status:"On request" },
  { code:"AS268", size:"215,49 x 3,53", status:"On request" },
  { code:"AS269", size:"221,84 x 3,53", status:"On request" },
  { code:"AS270", size:"228,19 x 3,53", status:"On request" },
  { code:"AS271", size:"234,54 x 3,53", status:"On request" },
  { code:"AS272", size:"240,89 x 3,53", status:"On request" },
  { code:"AS273", size:"247,24 x 3,53", status:"On request" },
  { code:"AS274", size:"253,59 x 3,53", status:"On request" },
  { code:"AS275", size:"266,29 x 3,53", status:"On request" },
  { code:"AS276", size:"278,99 x 3,53", status:"On request" },
  { code:"AS277", size:"291,69 x 3,53", status:"On request" },
  { code:"AS278", size:"304,39 x 3,53", status:"On request" },
  { code:"AS279", size:"329,79 x 3,53", status:"On request" },
  { code:"AS280", size:"355,19 x 3,53", status:"On request" },
  { code:"AS281", size:"380,59 x 3,53", status:"On request" },
  { code:"AS282", size:"405,26 x 3,53", status:"On request" },
  { code:"AS283", size:"430,66 x 3,53", status:"On request" },
  { code:"AS284", size:"456,06 x 3,53", status:"On request" },

  { code:"AS309", size:"10,46 x 5,33", status:"On request" },
  { code:normCode("AS 310"), size:"12,07 x 5,33", status:"On request" },
  { code:"AS311", size:"13,64 x 5,33", status:"On request" },
  { code:"AS312", size:"15,24 x 5,33", status:"On request" },
  { code:"AS313", size:"16,81 x 5,33", status:"On request" },
  { code:"AS314", size:"18,42 x 5,33", status:"On request" },
  { code:"AS315", size:"19,99 x 5,33", status:"On request" },
  { code:"AS316", size:"21,59 x 5,33", status:"On request" },
  { code:"AS317", size:"23,16 x 5,33", status:"On request" },
  { code:"AS318", size:"24,77 x 5,33", status:"On request" },
  { code:"AS319", size:"26,34 x 5,33", status:"On request" },
  { code:"AS320", size:"27,94 x 5,33", status:"On request" },
  { code:"AS321", size:"29,51 x 5,33", status:"On request" },
  { code:"AS322", size:"31,12 x 5,33", status:"On request" },
  { code:"AS323", size:"32,69 x 5,33", status:"On request" },
  { code:"AS324", size:"34,29 x 5,33", status:"On request" },
  { code:"AS325", size:"37,47 x 5,33", status:"On request" },
  { code:"AS326", size:"40,64 x 5,33", status:"On request" },
  { code:"AS327", size:"43,82 x 5,33", status:"On request" },
  { code:"AS328", size:"46,99 x 5,33", status:"On request" },
  { code:"AS329", size:"50,17 x 5,33", status:"On request" },
  { code:"AS330", size:"53,34 x 5,33", status:"In stock" },
  { code:"AS331", size:"56,52 x 5,33", status:"In stock" },
  { code:"AS332", size:"59,69 x 5,33", status:"In stock" },
  { code:"AS333", size:"62,87 x 5,33", status:"On request" },
  { code:"AS334", size:"66,04 x 5,33", status:"In stock" },
  { code:"AS335", size:"69,22 x 5,33", status:"In stock" },
  { code:"AS336", size:"72,39 x 5,33", status:"On request" },
  { code:"AS337", size:"75,57 x 5,33", status:"On request" },
  { code:"AS338", size:"78,74 x 5,33", status:"In stock" },
  { code:"AS339", size:"81,92 x 5,33", status:"In stock" },
  { code:"AS340", size:"85,09 x 5,33", status:"In stock" },
  { code:"AS341", size:"88,27 x 5,33", status:"On request" },
  { code:"AS342", size:"91,44 x 5,33", status:"In stock" },
  { code:"AS343", size:"94,62 x 5,33", status:"In stock" },
  { code:"AS344", size:"97,79 x 5,33", status:"In stock" },
  { code:"AS345", size:"100,97 x 5,33", status:"In stock" },
  { code:"AS346", size:"104,14 x 5,33", status:"On request" },
  { code:"AS347", size:"107,32 x 5,33", status:"On request" },
  { code:"AS348", size:"110,49 x 5,33", status:"In stock" },
  { code:"AS349", size:"113,67 x 5,33", status:"In stock" },
  { code:"AS350", size:"116,84 x 5,33", status:"On request" },
  { code:"AS351", size:"120,02 x 5,33", status:"In stock" },
  { code:"AS352", size:"123,19 x 5,33", status:"On request" },
  { code:"AS353", size:"126,37 x 5,33", status:"On request" },
  { code:"AS354", size:"129,54 x 5,33", status:"In stock" },
  { code:"AS355", size:"132,72 x 5,33", status:"On request" },
  { code:"AS356", size:"135,89 x 5,33", status:"On request" },
  { code:"AS357", size:"139,07 x 5,33", status:"On request" },
  { code:"AS358", size:"142,24 x 5,33", status:"On request" },
  { code:"AS359", size:"145,42 x 5,33", status:"On request" },
  { code:"AS360", size:"148,59 x 5,33", status:"On request" },
  { code:"AS361", size:"151,77 x 5,33", status:"On request" },
  { code:"AS362", size:"158,12 x 5,33", status:"In stock" },
  { code:"AS363", size:"164,47 x 5,33", status:"On request" },
  { code:"AS364", size:"170,82 x 5,33", status:"On request" },
  { code:"AS365", size:"177,17 x 5,33", status:"On request" },
  { code:"AS366", size:"183,52 x 5,33", status:"On request" },
  { code:"AS367", size:"189,87 x 5,33", status:"On request" },
  { code:"AS368", size:"196,22 x 5,33", status:"On request" },
  { code:"AS369", size:"202,57 x 5,33", status:"On request" },
  { code:"AS370", size:"208,92 x 5,33", status:"On request" },
  { code:"AS371", size:"215,27 x 5,33", status:"On request" },
  { code:"AS372", size:"221,62 x 5,33", status:"On request" },
  { code:"AS373", size:"227,97 x 5,33", status:"On request" },
  { code:"AS374", size:"234,32 x 5,33", status:"On request" },
  { code:"AS375", size:"240,67 x 5,33", status:"On request" },
  { code:"AS376", size:"247,02 x 5,33", status:"On request" },
  { code:"AS377", size:"253,37 x 5,33", status:"On request" },
  { code:"AS378", size:"266,07 x 5,33", status:"On request" },
  { code:"AS379", size:"278,77 x 5,33", status:"On request" },
  { code:"AS380", size:"291,47 x 5,33", status:"On request" },
  { code:"AS381", size:"304,17 x 5,33", status:"On request" },
  { code:"AS382", size:"329,57 x 5,33", status:"On request" },
  { code:"AS383", size:"354,97 x 5,33", status:"On request" },
  { code:"AS384", size:"380,37 x 5,33", status:"On request" },
  { code:"AS385", size:"405,26 x 5,33", status:"On request" },
  { code:"AS386", size:"430,66 x 5,33", status:"On request" },
  { code:"AS387", size:"456,06 x 5,33", status:"On request" },
  { code:"AS388", size:"481,46 x 5,33", status:"On request" },
  { code:"AS389", size:"506,86 x 5,33", status:"On request" },
  { code:"AS390", size:"532,26 x 5,33", status:"On request" },
  { code:"AS391", size:"557,66 x 5,33", status:"On request" },
  { code:"AS392", size:"582,68 x 5,33", status:"On request" },
  { code:"AS393", size:"608,08 x 5,33", status:"On request" },
  { code:"AS394", size:"633,48 x 5,33", status:"On request" },
  { code:"AS395", size:"658,88 x 5,33", status:"On request" },
].map(x => ({...x, code: normCode(x.code)}));

/** =========================
 *  UI — Table + Filtering
 *  ========================= */
const tbody = document.getElementById("tbody");
const search = document.getElementById("search");
const statusFilter = document.getElementById("statusFilter");
const stats = document.getElementById("stats");

let sortState = { key:"code", dir:"asc" };

function statusKey(s){
  return (s || "").toLowerCase().includes("in stock") ? "in" : "req";
}
function badgeClass(s){
  return statusKey(s) === "in" ? "instock" : "onrequest";
}
function rowClass(s){
  return statusKey(s) === "in" ? "row-instock" : "row-onrequest";
}

function sortData(arr){
  const {key, dir} = sortState;
  const mul = dir === "asc" ? 1 : -1;

  // stable-ish sort
  return [...arr].sort((a,b) => {
    let av = a[key], bv = b[key];

    // normalize for sorting
    if(key === "status"){
      av = statusKey(a.status);
      bv = statusKey(b.status);
    }
    av = (av ?? "").toString().toLowerCase();
    bv = (bv ?? "").toString().toLowerCase();

    if(av < bv) return -1*mul;
    if(av > bv) return 1*mul;
    return 0;
  });
}

function getFiltered(){
  const q = (search.value || "").trim().toLowerCase();
  const f = statusFilter.value;

  return DATA.filter(item => {
    const matchesQ = !q || (
      item.code.toLowerCase().includes(q) ||
      item.size.toLowerCase().includes(q) ||
      item.status.toLowerCase().includes(q)
    );

    const sk = statusKey(item.status);
    const matchesF = (f === "all") || (f === sk);

    return matchesQ && matchesF;
  });
}

function render(){
  const filtered = sortData(getFiltered());

  tbody.innerHTML = "";
  for(const item of filtered){
    const tr = document.createElement("tr");
    tr.className = rowClass(item.status);
    tr.innerHTML = `
      <td class="code">${escapeHtml(item.code)}</td>
      <td>${escapeHtml(item.size)}</td>
      <td><span class="badge ${badgeClass(item.status)}">${escapeHtml(item.status)}</span></td>
      <td>
        <div class="actions">
          <button class="btn" type="button" data-action="request">Request</button>
        </div>
      </td>
    `;

    tr.addEventListener("click", (e) => {
      // avoid double-trigger when clicking button
      const btn = e.target.closest('button[data-action="request"]');
      openRequestModal(item);
    });

    tbody.appendChild(tr);
  }

  const total = DATA.length;
  const shown = filtered.length;
  const inCount = DATA.filter(x => statusKey(x.status)==="in").length;
  const reqCount = total - inCount;

  stats.innerHTML = `
    <span class="stat"><strong>${shown}</strong> visible / ${total} total</span>
    <span class="stat"><span style="color:var(--green);font-weight:900;">●</span> In stock: <strong>${inCount}</strong></span>
    <span class="stat"><span style="color:var(--orange);font-weight:900;">●</span> On request: <strong>${reqCount}</strong></span>
  `;
}

function escapeHtml(str){
  return (str ?? "").toString()
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

search.addEventListener("input", render);
statusFilter.addEventListener("change", render);

document.querySelectorAll("th.sortable").forEach(th => {
  th.addEventListener("click", () => {
    const key = th.dataset.sort;
    if(sortState.key === key){
      sortState.dir = sortState.dir === "asc" ? "desc" : "asc";
    } else {
      sortState.key = key;
      sortState.dir = "asc";
    }
    render();
  });
});

/** =========================
 *  Modal + Mailto form
 *  ========================= */
const modalOverlay = document.getElementById("modalOverlay");
const closeModalBtn = document.getElementById("closeModal");
const openGeneralFormBtn = document.getElementById("openGeneralForm");

const fName = document.getElementById("fName");
const fCompany = document.getElementById("fCompany");
const fEmail = document.getElementById("fEmail");
const fPhone = document.getElementById("fPhone");
const fCode = document.getElementById("fCode");
const fSize = document.getElementById("fSize");
const fQty = document.getElementById("fQty");
const fStatus = document.getElementById("fStatus");
const fMessage = document.getElementById("fMessage");
const requestForm = document.getElementById("requestForm");
const copyDetailsBtn = document.getElementById("copyDetails");

let currentItem = null;

function openModal(){
  modalOverlay.style.display = "flex";
  modalOverlay.setAttribute("aria-hidden","false");
  // focus first input
  setTimeout(() => fName.focus(), 0);
}
function closeModal(){
  modalOverlay.style.display = "none";
  modalOverlay.setAttribute("aria-hidden","true");
  currentItem = null;
}

function openRequestModal(item){
  currentItem = item || null;

  // Prefill product fields
  fCode.value = item?.code || "";
  fSize.value = item?.size || "";
  fStatus.value = item?.status || "";
  if(!fQty.value) fQty.value = ""; // keep if user typed earlier
  if(!fMessage.value) fMessage.value = "";

  document.getElementById("modalHeading").textContent =
    item ? `Request — ${PRODUCT_NAME} (${item.code})` : `General request — ${PRODUCT_NAME}`;

  document.getElementById("modalSub").textContent =
    item
      ? `Selected: ${item.code} — ${item.size} (${item.status}).`
      : `No specific size selected.`;

  openModal();
}

closeModalBtn.addEventListener("click", closeModal);
modalOverlay.addEventListener("click", (e) => {
  if(e.target === modalOverlay) closeModal();
});
document.addEventListener("keydown", (e) => {
  if(e.key === "Escape" && modalOverlay.style.display === "flex") closeModal();
});

openGeneralFormBtn.addEventListener("click", () => openRequestModal(null));

function buildMailBody(){
  const lines = [
    `Request — ${PRODUCT_NAME}`,
    ``,
    `Contact details`,
    `- Name: ${fName.value || "-"}`,
    `- Company: ${fCompany.value || "-"}`,
    `- Email: ${fEmail.value || "-"}`,
    `- Phone: ${fPhone.value || "-"}`,
    ``,
    `Product`,
    `- Code: ${fCode.value || "-"}`,
    `- ID x CS (mm): ${fSize.value || "-"}`,
    `- Status: ${fStatus.value || "-"}`,
    `- Requested quantities: ${fQty.value || "-"}`,
    ``,
    `Message`,
    `${(fMessage.value || "-")}`,
    ``,
    `--`,
    `Sent via Sealrez® stock page`
  ];
  return lines.join("\n");
}

copyDetailsBtn.addEventListener("click", async () => {
  const text = buildMailBody();
  try{
    await navigator.clipboard.writeText(text);
    copyDetailsBtn.textContent = "Copied ✓";
    setTimeout(()=> copyDetailsBtn.textContent="Copy text", 1200);
  }catch(err){
    alert("Copying to clipboard is not allowed in this browser/context.");
  }
});

requestForm.addEventListener("submit", (e) => {
  e.preventDefault();

  const subjectBase = currentItem
    ? `Request ${PRODUCT_NAME} — ${currentItem.code} (${currentItem.size})`
    : `Request ${PRODUCT_NAME} — general request`;

  const subject = encodeURIComponent(subjectBase);
  const body = encodeURIComponent(buildMailBody());

  // Mailto (opens email client)
  window.location.href = `mailto:${EMAIL_TO}?subject=${subject}&body=${body}`;
});

/** =========================
 *  Background Animation — Falling O-rings
 *  ========================= */
const canvas = document.getElementById("ringsCanvas");
const ctx = canvas.getContext("2d", { alpha:true });

function resizeCanvas(){
  const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
  canvas.width = Math.floor(window.innerWidth * dpr);
  canvas.height = Math.floor(window.innerHeight * dpr);
  canvas.style.width = window.innerWidth + "px";
  canvas.style.height = window.innerHeight + "px";
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
window.addEventListener("resize", resizeCanvas);

const rings = [];
const RING_COUNT = 38;

function rand(min,max){ return Math.random()*(max-min)+min; }

function spawnRing(i){
  const w = window.innerWidth;
  const h = window.innerHeight;

  const r = rand(10, 44);
  const line = rand(2, 6);
  const x = rand(-80, w+80);
  const y = rand(-h, -20);
  const vy = rand(0.6, 2.6);
  const vx = rand(-0.35, 0.35);
  const rot = rand(0, Math.PI*2);
  const vr = rand(-0.01, 0.01);

  // mix green/white/orange strokes with alpha
  const mode = Math.random();
  let stroke = "rgba(0,155,117,0.55)";
  if(mode > 0.68) stroke = "rgba(245,158,11,0.38)";
  if(mode > 0.90) stroke = "rgba(242,242,243,0.22)";

  rings[i] = { x,y,r,line,vx,vy,rot,vr,stroke };
}

function initRings(){
  rings.length = 0;
  for(let i=0;i<RING_COUNT;i++){
    spawnRing(i);
    rings[i].y = rand(-window.innerHeight, window.innerHeight); // distribute
  }
}

function drawRing(o){
  ctx.save();
  ctx.translate(o.x, o.y);
  ctx.rotate(o.rot);

  // ring stroke
  ctx.beginPath();
  ctx.arc(0,0,o.r,0,Math.PI*2);
  ctx.strokeStyle = o.stroke;
  ctx.lineWidth = o.line;
  ctx.stroke();

  // subtle inner highlight
  ctx.beginPath();
  ctx.arc(0,0,Math.max(2, o.r - o.line*1.4), 0, Math.PI*2);
  ctx.strokeStyle = "rgba(255,255,255,0.10)";
  ctx.lineWidth = Math.max(1, o.line*0.45);
  ctx.stroke();

  ctx.restore();
}

let lastT = performance.now();
function tick(t){
  const dt = Math.min(32, t - lastT); // ms
  lastT = t;

  ctx.clearRect(0,0,window.innerWidth, window.innerHeight);

  const w = window.innerWidth;
  const h = window.innerHeight;

  for(let i=0;i<rings.length;i++){
    const o = rings[i];
    o.x += o.vx * (dt/16);
    o.y += o.vy * (dt/16);
    o.rot += o.vr * (dt/16);

    // wrap
    if(o.y - o.r > h + 80) {
      spawnRing(i);
      o.y = -rand(40, 260);
    }
    if(o.x < -120) o.x = w + 120;
    if(o.x > w + 120) o.x = -120;

    drawRing(o);
  }

  requestAnimationFrame(tick);
}

resizeCanvas();
initRings();
requestAnimationFrame(tick);

/** initial render */
render();
</script>
</body>
</html>
